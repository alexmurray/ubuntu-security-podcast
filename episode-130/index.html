<!DOCTYPE html>
<html itemscope lang="en-us">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta charset="utf-8">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <meta name="description" content="  This week we discuss compiler warnings as build errors in the Linux kernel,
  plus we look at security updates for HAProxy, GNU cpio, PySAML2,
  mod-auth-mellon and more.
  ">

<meta name="generator" content="Hugo 0.131.0">

<meta property="og:title" content="Episode 130" />
<meta name="twitter:title" content="Episode 130"/>
<meta itemprop="name" content="Episode 130">
<meta property="article:published_time" content="2021-09-10T14:21:00&#43;09:30" />
<meta property="article:modified_time" content="2022-05-15T18:05:57&#43;09:30" />
<meta property="og:updated_time" content="2022-05-15T18:05:57&#43;09:30" /><meta property="og:site_name" content="Ubuntu Security Podcast" /><meta property="og:description" content="  This week we discuss compiler warnings as build errors in the Linux kernel,
  plus we look at security updates for HAProxy, GNU cpio, PySAML2,
  mod-auth-mellon and more.
  " />
    <meta name="twitter:description" content="  This week we discuss compiler warnings as build errors in the Linux kernel,
  plus we look at security updates for HAProxy, GNU cpio, PySAML2,
  mod-auth-mellon and more.
  " />
    <meta itemprop="description" content="  This week we discuss compiler warnings as build errors in the Linux kernel,
  plus we look at security updates for HAProxy, GNU cpio, PySAML2,
  mod-auth-mellon and more.
  ">

  
    <meta name="twitter:site" content="@ubuntu_sec"/>
    <meta name="twitter:creator" content="@ubuntu_sec"/>
  

<meta name="twitter:domain" content="ubuntu.com"/>

<meta property="og:type" content="article" />
<meta property="og:url" content="/episode-130/" />




<title>Episode 130</title>
<link rel="canonical" href="https://ubuntusecuritypodcast.org/episode-130/">







<link rel="icon" href="https://ubuntusecuritypodcast.org/img/usp_logo_32.png">









<link href="https://ubuntusecuritypodcast.org/css/ubuntu.css" rel="stylesheet">

<link href="https://fonts.googleapis.com/css?family=Lato|Raleway" rel="stylesheet">


<link href=https://ubuntusecuritypodcast.org/css/all.css rel="stylesheet">
<link href=https://ubuntusecuritypodcast.org/css/mediaelementplayer.min.css rel="stylesheet">
<style>
    .mejs__overlay-button {
        background-image: url("/img/mejs-controls.svg");
    }
    .mejs__overlay-loading-bg-img {
        background-image: url("/img/mejs-controls.svg");
    }
    .mejs__button > button {
        background-image: url("/img/mejs-controls.svg");
    }
    </style>
<link href=https://ubuntusecuritypodcast.org/css/speed.min.css rel="stylesheet">
<link rel="alternate" type="application/rss+xml" title="Ubuntu Security Podcast" href="https://ubuntusecuritypodcast.org/episode/index.xml"/>

</head>

<body lang="">
<nav class="navbar fixed-top navbar-expand-md navbar-light bg-light">
<div class="container">
<a class="navbar-brand" href="https://ubuntusecuritypodcast.org/">Ubuntu Security Podcast</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div id="navbarSupportedContent" class="navbar-collapse collapse">
      <ul class="navbar-nav mr-auto">
          
          
            
              
                  <li class= "nav-item ">
                  <a href="https://ubuntusecuritypodcast.org/about/" class="nav-link">
                      
                      <span>About</span>
                  </a>
                </li>
              
            
              
                  <li class= "nav-item ">
                  <a href="https://ubuntusecuritypodcast.org/contact/" class="nav-link">
                      
                      <span>Contact</span>
                  </a>
                </li>
              
            
          
        </ul>

      <ul class="navbar-nav ml-auto">
        
        
          <li>
            

  <a class="social-links" href = "https://twitter.com/ubuntu_sec"><i class="fab fa-twitter-square fa-2x"></i></a>


          </li>
        
        
        
        
        
        
        
        
        
        <li>
          

  <a class="social-links" href = "https://fosstodon.org/@ubuntusecurity"><i class="fab fa-mastodon fa-2x"></i></a>


        </li>
        
      </ul>
  </div>
  </div>
  </nav>

<div class="container middle_container">
  

  <div class="row">
    <div class="col">      
      
        <h1>Episode 130</h1>
      <small>Posted on Friday, Sep 10, 2021 


</small></div>
  </div>

  
    <div class="row">
          <div class="col-md-3">
            <img src="https://ubuntusecuritypodcast.org/img/usp_logo_500.png" class="img-fluid episode_image"/>
          </div>
          <div class="col-md-8">
            This week we discuss compiler warnings as build errors in the Linux kernel,
plus we look at security updates for HAProxy, GNU cpio, PySAML2,
mod-auth-mellon and more.
          </div>
        </div>
    <div class="row">
          <div class="col-md-12 player_row">

          <audio id="player2" style="width: 100%" controls preload="none">
            <source src="https://people.canonical.com/~amurray/USP/USP_E130.mp3" type="audio/mp3">
            </audio>
          </div>
        </div>

  <div class="row">
    <div class="col">
      <h2>Show Notes</h2>
      <h2 id="overview">Overview</h2>
<p>This week we discuss compiler warnings as build errors in the Linux kernel,
plus we look at security updates for HAProxy, GNU cpio, PySAML2,
mod-auth-mellon and more.</p>
<h2 id="this-week-in-ubuntu-security-updates">This week in Ubuntu Security Updates</h2>
<p>15 unique CVEs addressed</p>
<h3 id="usn-5051-4-openssl-regression-00-51">[<a href="https://ubuntu.com/security/notices/USN-5051-4">USN-5051-4</a>] OpenSSL regression [00:51]</h3>
<ul>
<li>1 CVEs addressed in Trusty ESM (14.04 ESM)
<ul>
<li><a href="https://ubuntu.com/security/CVE-2021-3712">CVE-2021-3712</a> <!-- raw HTML omitted --></li>
</ul>
</li>
<li><a href="https://ubuntusecuritypodcast.org/episode-129/">Episode 129</a></li>
<li>Original backport of patch contained a typo which introduced a regression
where ASN1_STRINGs would fail to print in some cases</li>
</ul>
<h3 id="usn-5062-1-linux-kernel-vulnerability-01-20">[<a href="https://ubuntu.com/security/notices/USN-5062-1">USN-5062-1</a>] Linux kernel vulnerability [01:20]</h3>
<ul>
<li>1 CVEs addressed in Trusty ESM (14.04 ESM), Xenial ESM (16.04 ESM)
<ul>
<li><a href="https://ubuntu.com/security/CVE-2021-3653">CVE-2021-3653</a> <!-- raw HTML omitted --></li>
</ul>
</li>
<li>AMD specific issue in KVM subsystem with nested virtualisation - would
fail to validate particular operations which could be performed by a
guest VM - in this case would allow a guest to enable the Advanced
Virtual Interrupt Controller for a nested VM (ie L2 VM) - this would then
allow the L2 VM to write to host memory -&gt; code execution on the host</li>
</ul>
<h3 id="usn-5063-1-haproxy-vulnerabilities-02-40">[<a href="https://ubuntu.com/security/notices/USN-5063-1">USN-5063-1</a>] HAProxy vulnerabilities [02:40]</h3>
<ul>
<li>1 CVEs addressed in Focal (20.04 LTS), Hirsute (21.04)
<ul>
<li><a href="https://ubuntu.com/security/CVE-2021-40346">CVE-2021-40346</a> <!-- raw HTML omitted --></li>
</ul>
</li>
<li>Integer overflow in handling of header name lengths - most significant
bit of header <strong>name</strong> length could slip into the LSB of header <strong>value</strong>
length - could then craft a valid request that would inject a dummy
content-length on input, this would then be reproduced on the output as
well as the original correct header length - can then get a &ldquo;blind&rdquo;
request smuggling attack since the extra request bypasses ACL checking
etc</li>
</ul>
<h3 id="usn-5064-1-gnu-cpio-vulnerability-04-13">[<a href="https://ubuntu.com/security/notices/USN-5064-1">USN-5064-1</a>] GNU cpio vulnerability [04:13]</h3>
<ul>
<li>1 CVEs addressed in Bionic (18.04 LTS), Focal (20.04 LTS), Hirsute (21.04)
<ul>
<li><a href="https://ubuntu.com/security/CVE-2021-38185">CVE-2021-38185</a> <!-- raw HTML omitted --></li>
</ul>
</li>
<li>Integer overflow -&gt; heap buffer overflow in the handling of pattern
files - this allows to specify a file which contains a list of patterns
to match against filenames in the cpio archive which should be
extracted - is not clear if can easily abuse this as a remote attacker
since would need to be able to supply a crafted pattern file and have
this get used but these are not often used in practice</li>
</ul>
<h3 id="usn-5065-1-open-vswitch-vulnerability-05-08">[<a href="https://ubuntu.com/security/notices/USN-5065-1">USN-5065-1</a>] Open vSwitch vulnerability [05:08]</h3>
<ul>
<li>1 CVEs addressed in Focal (20.04 LTS), Hirsute (21.04)
<ul>
<li><a href="https://ubuntu.com/security/CVE-2021-36980">CVE-2021-36980</a> <!-- raw HTML omitted --></li>
</ul>
</li>
<li>UAF in decoding of RAW_ENCAP actions - remote attacker could craft one -&gt;
crash / RCE..?</li>
</ul>
<h3 id="usn-5066-1-usn-5066-2-pysaml2-vulnerability-05-39">[<a href="https://ubuntu.com/security/notices/USN-5066-1">USN-5066-1</a>, <a href="https://ubuntu.com/security/notices/USN-5066-2">USN-5066-2</a>] PySAML2 vulnerability [05:39]</h3>
<ul>
<li>1 CVEs addressed in Xenial ESM (16.04 ESM), Bionic (18.04 LTS), Focal (20.04 LTS), Hirsute (21.04)
<ul>
<li><a href="https://ubuntu.com/security/CVE-2021-21239">CVE-2021-21239</a> <!-- raw HTML omitted --></li>
</ul>
</li>
<li>pysaml2 uses xmlsec1 binary to validate cryptographic signatures on SAML
documents</li>
<li>By default xmlsec will accept any type of key found in the document to
verify the signature - so an attacker could embed their own signature
using just a HMAC and this would get validated as correct without even
consulting the X509 cert which should be used to validate the document -
simple fix to just change the CLI arguments to xmlsec1 to specify that it
should validate based on x509 certs</li>
</ul>
<h3 id="usn-5067-1-sssd-vulnerabilities-07-06">[<a href="https://ubuntu.com/security/notices/USN-5067-1">USN-5067-1</a>] SSSD vulnerabilities [07:06]</h3>
<ul>
<li>4 CVEs addressed in Bionic (18.04 LTS), Focal (20.04 LTS), Hirsute (21.04)
<ul>
<li><a href="https://ubuntu.com/security/CVE-2021-3621">CVE-2021-3621</a> <!-- raw HTML omitted --></li>
<li><a href="https://ubuntu.com/security/CVE-2019-3811">CVE-2019-3811</a> <!-- raw HTML omitted --></li>
<li><a href="https://ubuntu.com/security/CVE-2018-16838">CVE-2018-16838</a> <!-- raw HTML omitted --></li>
<li><a href="https://ubuntu.com/security/CVE-2018-10852">CVE-2018-10852</a> <!-- raw HTML omitted --></li>
</ul>
</li>
<li>Possible shell command injection via the sssctl binary using the
logs-fetch and cache-expire subcommands - if could trick root into
running crafted commands could then get root&hellip; - was as a result of
using the system() syscall which evaluates a string to the shell - so
allows shell command injection directly - was fixed to instead use
fork() + execvp() on an array of arguments - which doesn&rsquo;t go via the
shell to run the specified subcommand</li>
<li>common pattern for security vulns, something we specifically look for
when auditing packages as part of the security review for MIRs</li>
</ul>
<h3 id="usn-5069-1-mod-auth-mellon-vulnerability-08-54">[<a href="https://ubuntu.com/security/notices/USN-5069-1">USN-5069-1</a>] mod-auth-mellon vulnerability [08:54]</h3>
<ul>
<li>1 CVEs addressed in Bionic (18.04 LTS), Focal (20.04 LTS)
<ul>
<li><a href="https://ubuntu.com/security/CVE-2021-3639">CVE-2021-3639</a> <!-- raw HTML omitted --></li>
</ul>
</li>
<li>SAML2 auth module for Apache</li>
<li>Failed to filter URLS that start with <code>///</code> - an attacker could craft a URL
that specified a particular URL via the <code>ReturnTo</code> parameter and this would
then automatically redirect the user to that crafted URL - so could be
used for phishing attacks that look more trustworthy. ie. an attacker
creates a phishing site that copies the victim site at their own
domain. they then send an email to a user asking them to login and they
specify a URL to the real victim site but with the <code>ReturnTo</code> parameter set
to their own site - a user looking at this URL will see it specifies the
real site so won&rsquo;t be concerned - when they visit it they get
automatically redirected to the victim site - so if they don&rsquo;t then check
the URL they will start logging into the fake phishing site and not the
real one - fixed to just reject these URLs so they don&rsquo;t get abused by
the redirect process</li>
</ul>
<h3 id="usn-5068-1-gd-library-vulnerabilities-10-24">[<a href="https://ubuntu.com/security/notices/USN-5068-1">USN-5068-1</a>] GD library vulnerabilities [10:24]</h3>
<ul>
<li>4 CVEs addressed in Trusty ESM (14.04 ESM), Xenial ESM (16.04 ESM), Bionic (18.04 LTS), Focal (20.04 LTS), Hirsute (21.04)
<ul>
<li><a href="https://ubuntu.com/security/CVE-2021-38115">CVE-2021-38115</a> <!-- raw HTML omitted --></li>
<li><a href="https://ubuntu.com/security/CVE-2021-40145">CVE-2021-40145</a> <!-- raw HTML omitted --></li>
<li><a href="https://ubuntu.com/security/CVE-2021-381">CVE-2021-381</a> <!-- raw HTML omitted --></li>
<li><a href="https://ubuntu.com/security/CVE-2017-6363">CVE-2017-6363</a> <!-- raw HTML omitted --></li>
</ul>
</li>
<li>Crafted image files -&gt; OOB read / write - crash / code exec</li>
<li>One in TGA handling but others in the proprietary GD/GD2 formats which
upstream say is now deprecated so shouldn&rsquo;t get a CVE - recommend if you
are processing GD/GD2 image files from untrusted sources that you stop as
upstream may stop issuing updates for these / may not get CVEs</li>
</ul>
<h2 id="goings-on-in-ubuntu-security-community">Goings on in Ubuntu Security Community</h2>
<h3 id="linux-kernel-enables-werror-11-33">Linux kernel enables -Werror [11:33]</h3>
<ul>
<li>Initially <a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=3fe617ccafd6f5bb33c2391d6f4eeb41c1fd0151">enabled by default</a>, <a href="https://lore.kernel.org/linux-hardening/CAHk-=wj4EG=kCOaqyPEq5VXa97kyUHsBpBn3DWwE91qcnDytOQ@mail.gmail.com/">in response</a> to patches from Kees Cook @
Google which introduced a bunch of new warnings - Linus wants a clean
build</li>
<li><a href="https://lore.kernel.org/linux-security-module/20210907183843.33028-1-ndesaulniers@google.com/">Lots of push back</a> since this then immediately broke a heap of CI systems
as there a lots of existing bits of kernel code that generates warnings -
and depending on what config options you enable you compile different
bits of code so can see or not see various warnings - and hence different
architectures etc - even having a <a href="https://lore.kernel.org/linux-hardening/202109061009.3C4B6114C3@keescook/">different locale / LANG setting</a> can
result in different compiler warnings as Kees found due to the nature of
some of the tests</li>
<li>Given the huge codebase with so many different configurations is almost
impossible to test them all and find all the various warnings, let alone
actually fix them</li>
<li>For years folks have been trying to drive down the warnings but is still
a hard and ongoing effort</li>
<li>As such, ended up <a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit?id=b339ec9c229aaf399296a120d7be0e34fbc355ca">changing</a> this to a <a href="https://lore.kernel.org/linux-security-module/YTfkO2PdnBXQXvsm@elver.google.com/">suggestion from Marco Elver</a> (also at
Google) to enable this when <code>COMPILE_TEST</code> is enabled - this used as a flag
to tell the kernel to compile everything even if it is not being used -
and is then often used by CI systems / developers which explicitly want
to compile everything who work on detecting new warnings</li>
<li>Is a lofty goal and is very useful from a security PoV and is
illustrative of many real world efforts that try and introduce static
analysis etc for an existing codebase</li>
<li>Immediately get a high number of &rsquo;errors&rsquo; now that need to be addressed -
was fine before? - so how to introduce these in a way that doesn&rsquo;t impose
a huge upfront cost but still incentivizes fixing them over time and
allows to detect new issues</li>
<li>Is good to see a focus on this in a more tangible way from upstream as
compiler warnings are there for a reason and should not be ignored</li>
</ul>
<h3 id="hiring">Hiring</h3>
<h4 id="linux-cryptography-and-security-engineer">Linux Cryptography and Security Engineer</h4>
<ul>
<li><a href="https://canonical.com/careers/2612092/linux-cryptography-and-security-engineer-remote">https://canonical.com/careers/2612092/linux-cryptography-and-security-engineer-remote</a></li>
</ul>
<h4 id="security-engineer-ubuntu">Security Engineer - Ubuntu</h4>
<ul>
<li><a href="https://canonical.com/careers/2925180/security-engineer-ubuntu-remote">https://canonical.com/careers/2925180/security-engineer-ubuntu-remote</a></li>
</ul>
<h2 id="get-in-contact">Get in contact</h2>
<ul>
<li><a href="mailto:security@ubuntu.com">security@ubuntu.com</a></li>
<li><a href="https://libera.chat">#ubuntu-security on the Libera.Chat IRC network</a></li>
<li><a href="https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened">ubuntu-hardened mailing list</a></li>
<li><a href="https://discourse.ubuntu.com/c/security">Security section on discourse.ubuntu.com</a></li>
<li><a href="https://twitter.com/ubuntu_sec">@ubuntu_sec on twitter</a></li>
</ul>

    </div>
  </div>



  

  


      <div class="row">
        
        <div class="col-md-12">
          <div id="share"></div>
        </div>
      </div>
      
      
      
      

      <div class="row">
        
        <div class="col-md-12">
          <nav>
            <ul class="pagination">
              
                <li class="page-item">
                  <a href="https://ubuntusecuritypodcast.org/episode-129/" class="page-link">
                    <span aria-hidden="true">&larr;</span>
                    Previous</a>
                </li>
                
              
                <li class="page-item">
                  <a href="https://ubuntusecuritypodcast.org/episode-131/" class="page-link">Next
                    <span aria-hidden="true">&rarr;</span>
                  </a>
                </li>
                
            </ul>
          </nav>
        </div>
      </div>
      
    
</div> 
<div class = "container bottom_container">
  <div class="row">
  <div class="col-md-12">
    <nav class = "navbar navbar-default navbar_footer">
    <ul class="nav navbar-nav navbar-right">
      
        <li>
          <p class = "footer_copyright">Copyright 2018-2024 <a href="https://www.canonical.com/">Canonical</a></p>
        </li>
      
      <li>
        &nbsp;
      </li>
    </ul>
  </nav>

  </div>
</div>
</div>
<script src='https://ubuntusecuritypodcast.org/js/castanet-min.js'></script>
<script>
  $("#share").jsSocials({
      shares: [
    {
      share: "facebook",
      logo: "fab fa-facebook",
    },
    {
      share: "twitter",           
      label: "Tweet",             
      logo: "fab fa-twitter",
      
      
      
      
      
        
          via: "ubuntu_sec", 
        
      
      url: "https:\/\/ubuntusecuritypodcast.org\/episode-130\/",
      text: "Episode 130"
    },
    {
      share: "linkedin",
      logo: "fab fa-linkedin"
    },
    {
      share: "pinterest",
      logo: "fab fa-pinterest"
    }
  ],
  });
</script>

<script>
    $(document).ready(function() {

        $('.transcript').hide();
        $(".hide_transcript").hide();
        $(".hide_transcript").click(function() {
            $(".transcript").hide("fast");
            $(".show_transcript").show();
            $(".hide_transcript").hide();
        });

        $(".show_transcript").click(function() {
            $(".transcript").show(500);
            $(".hide_transcript").show();
            $(".show_transcript").hide();
        });

    });
</script>

<script>
    var player = new MediaElementPlayer('player2', {
        features: ['playpause', 'current', 'progress', 'duration', 'volume', 'speed'],
        defaultSpeed: 1.0,
        
    });
</script>

</body>
</html>

